(function(K){var q=false,F=false,M="172.16.51.32",Q="trc.adsage.cn",j="ws.adsage.cn";var f=document,J=window;if(K){K.incre();return;}else{_proto={slots:[],cur_slot_idx:-1,tracker:q?M:Q,init:function(){},rnd:function(){return parseInt(1000+Math.random()*999)+"";},err_handler:function(V,U,T){},extend:function(T){T.prototype=this;K=new T();return K;}};_proto.init.prototype=_proto;K=new _proto.init();var z=function(T){return f.getElementsByTagName(T);},A=function(T){return f.getElementById(T);},e=function(X,Y){var V,U,T,W=Y||window;V=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){U=Array.prototype.slice.call(arguments);U=V!=null?Array.prototype.concat(U,V):U;X.apply(W,U);};},v=function(T){return T.offsetWidth;},g=function(T){return T.offsetHeight;},m=new Function("x","return function(){if (window.innerWidth) return  window['inner'+x]; else if (document.documentElement && document.documentElement.clientWidth) return document.documentElement['client'+x]; else if (document.body.clientWidth) return document.body['client'+x]; }"),t=new Function("a","b","return function(){if (window.innerWidth) return window['page'+a+'Offset']; else if (document.documentElement && document.documentElement.clientWidth) return document.documentElement[''+b]; else if (document.body.clientWidth) return document.body[''+b];}"),b=new Function("a","b","return function(e){var x = 0, ee = e; while(ee) { x += ee[''+a]; ee = ee.offsetParent;}for (var e1 = e.parentNode; e1 && e1!=document.body; e1 = e1.parentNode ) { if (e[''+b]) x -= e[''+b];} return x;}");_get_vport_with=m("Width"),_get_vport_height=m("Height"),_get_v_scroll=t("Y","scrollTop"),_get_h_scroll=t("X","scrollLeft"),_get_x=b("offsetLeft","scrollLeft"),_get_y=b("offsetTop","scrollTop"),_pub_session_id=null,_is_new_user=null,_doc_is_ready=false,_ready_handler=function(U){if(_doc_is_ready){return;}for(var T=0;T<K.doc_ready_funcs.length;T++){K.doc_ready_funcs[T].call(K);}_doc_is_ready=true;};if(f.addEventListener){var B=function(Y,X,W,T,U){var V=e(W,Y);Y.addEventListener(X,V,T?true:false);return this;};var s=function(T){this.reg_hh(T);this.addEvent(f,"DOMContentLoaded",U,false).addEvent(J,"load",function(V){U(V);N();});return this;function U(V){_doc_is_ready||_ready_handler(V);}};}else{if(f.attachEvent){B=function(Y,X,W,T,U){var V=e(W,Y);Y.attachEvent("on"+X,V);U&&Y.setCapture();return this;};s=function(T){this.reg_hh(T);this.addEvent(f,"readystatechange",U).addEvent(J,"load",function(V){U(V);N();});if(f.documentElement.doScroll&&typeof J.frameElement==="object"){(function(V){if(_doc_is_ready){return;}try{f.documentElement.doScroll("left");}catch(W){setTimeout(arguments.callee,0);return;}_ready_handler({type:"detected"});})();}return this;function U(V){_doc_is_ready||_ready_handler(V);}};}else{B=function(Y,W,V,T,U){var X=Y["on"+W];Y["on"+W]=V;this["old_on"+W]=X?X:null;return this;};s=function(T){this.reg_hh(T);if(/safari/i.test(navigator.userAgent)){var U=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(U);_ready_handler();}},10);}this.addEvent(J,"load",function(V){N();});return this;};}}Array.prototype.lookup_callback=function(U,V){for(var T=this.length-1;T>=0;T--){if(V(this[T],U)){return true;}}return false;};var r=function(Y){var V=Y.getAttribute("src"),U=V?V+"":"";var T=X(U)||Y.id.indexOf("aswift")>-1,Z=false,W=U.indexOf("cpro.baidu.com/cpro/ui/uijs.php")>-1;return T?2:(Z?3:W?4:0);function X(aa){if(aa.indexOf("doubleclick.net")>-1){return true;}else{return(aa.indexOf("googlesyndication.com")>-1)&&(function(ac){var ab=aa.match(/^[\w\W]+[\/]([^\/]+)\.[\w]+$/);return ab&&ab[1]&&!(ab[1]==ac);}("iframes_api_loader"));}}},u=function(U,X){var W=U.previousSibling;if(!W){W=U.parentNode;}while(W!=f.body){var V=X(W);if(V){break;}var T=W.previousSibling||W.parentNode;W=T;}return V?V:null;},d=function(T){var U;var V=r(T);if(V){return u(T,function(Y){var X=Y.getAttribute&&Y.getAttribute("name"),Z={};if(X){var W=X.match(/^pubsage_([\w\W]+)$/);if(W&&W[1]){Z.sn=W[1];Z.anchor=Y;return Z;}}return false;});}},w=function(ac){var an;var ab=v(ac);He=g(ac);var ae=_get_vport_with(),ad=_get_vport_height();var ai=_get_x(ac),V=_get_y(ac);var ah=ai+ab,U=V+He;var ap=_get_h_scroll(),ag=_get_v_scroll();var ao=ap+ae,af=ag+ad;var Z=Math.max(ai,ap),am=Math.max(V,ag);var X=Math.min(ah,ao),al=Math.min(U,af);(Z<=X&&am<=al)?an={width_visible:X-Z,height_visible:al-am}:an={width_visible:-1,height_visible:-1};var T=an.width_visible==-1?0:an.width_visible*an.height_visible;var W=ab*He;var ak,aj,aa,Y;if(T==W){return 1;}else{if(T<W&&an.width_visible!=-1&&an.height_visible!=-1){return 2;}else{if(an.width_visible==-1){return 3;}}}return 0;},c=function(){var T=f;while(T.lastChild&&T.lastChild.nodeType==1){T=T.lastChild;}return T;},x=function(Y){var U="";var Z=Y.match(/^[\w\W]+\(([\w\W]+)\)$/);if(Z){var V=Z[1].split(","),U;for(var X=0,T=V.length>3?V.length-1:V.length;X<T;X++){var W=(parseInt(V[X])).toString(16);if(W.length<2){W="0"+W;}U+=W;}}else{Z=Y.match(/^#[\w]+$/);if(Z){U=Z[0].substring(1);}}return U.length==0?"":U;},y=function(V,T){var U;if(V.currentStyle){U=V.currentStyle[T];}else{if(J.getComputedStyle){U=J.getComputedStyle(V,null)[T];}}return U;},h=function(T,U){while(T.parentNode&&(!T.tagName||!U(T))){T=T.parentNode;}return T;},o=function(W){var V=W||c();var U=h(V,function(Y){var X=y(Y,"backgroundColor");return(X&&X!="transparent");});if(U&&U!=document){var T=y(U,"backgroundColor");if(T){T=x(T);}return T;}return"nul";},P=function(){var ac=[],aa=z("iframe"),ag=z("script"),Y=[];for(var T=0;T<ag.length;T++){var ad=ag[T].getAttribute("name");if(ad&&/^pubsage_[\w\W]+$/.test(ad)){Y.push(ag[T]);}}if(aa&&aa.length>0){for(var W=0,X=aa.length;W<X;W++){var V=d(aa[W]);if(V){var ab={ads_elem:aa[W],slot_id:V.anchor.getAttribute("sltid"),anchor_spt:V.anchor,bg_color:o(aa[W]),display_status:w(aa[W])};ab.ads_elem.slot_id=ab.slot_id;ac.push(ab);}}}if(Y&&Y.length>0){for(var U=0,Z=Y.length;U<Z;U++){if(ac.lookup_callback(Y[U],function(ah,ai){return ah.anchor_spt==ai;})){continue;}var ae=Y[U].getAttribute("name").match(/pubsage_([\w\W]+)/)[1];var af={slot_id:Y[U].getAttribute("sltid"),anchor_spt:Y[U],bg_color:o(Y[U])};Y[U].getAttribute("pub_def")?(af.ads_elem=Y[U],af.display_status=5,af.ads_elem.slot_id=af.slot_id):(af.ads_elem=null,af.display_status=4);ac.push(af);}}return ac;},S=function(){return P();},R=function(U){var T="http://"+(U=="00"?(K.deliver+"/pub"):(K.tracker+"/trc"))+"/"+U+"/";return T;},C=function(){if(arguments.length<=0){return"";}var Z,U="";for(var X=0,T=arguments.length;X<T;X++){var Y=false;if((Z=parseInt(arguments[X]))<0){Y=true;}var V=4,W=Z.toString(16);W.substring(0,1)=="-"?k=W.length-1:k=W.length;W=Y?W.substring(1):W;while((V-k)>0){(V-k)>1?W="0"+W:(Y?W="f"+W:W="0"+W);V--;}U+=W;}return U;},D=function(Y,W){var T=W;try{var X={},V=0;var aa=f.getElementsByTagName(Y);for(i=0;i<aa.length;i++){var U=pubsage.getComputedCSSProperty(aa[i],"color");if(!X[U]){X[U]=1;}else{X[U]+=1;}if(V<X[U]){T=U;V=X[U];}}T=pubsage.convertToHexColor(T)||W;}catch(Z){}return T;},p=function(Z){var X=new Date(parseInt(_pub_session_id));var W=K.format_ext_time(X).substring(8)+"-"+_is_new_user+"-"+K.cookies.enabled+"-"+K.in_frame+"-"+C(screen.width,screen.height)+"-"+D("p","nul")+"-"+D("a","nul")+"-";var V="";for(var Y=0,T=Z.length;Y<T;Y++){var U=K.slots[Z[Y].anchor_spt.getAttribute("idx")].token;"number"==typeof Z[Y]?V+=Z[Y]+".0.nul."+U+(Y==T-1?"":"_"):V+=Z[Y]["slot_id"]+"."+Z[Y]["display_status"]+"."+Z[Y]["bg_color"]+"."+U+(Y==T-1?"":"_");}return W+V;},L=false,l=null,a=function(V){var W=V||J.event,U=this,T=W.type;switch(W.type){case"click":case"focus":if(!L){K.logger.send(K.get_url("02",W,U));L=true;W.type=="focus"&&(this.blur(),window.focus());setTimeout(function(){T=="focus"&&(U.blur(),window.focus());L=false;},1000);}break;case"mouseover":l=this;break;case"mouseout":this.blur();window.focus();if(l){cur_elem=null;}break;}},n=function(T){return{load:0,mouseover:1,click:2,focus:3,mouseout:4,blur:5,unload:9}[T.type];},O=function(){return window.defaultStatus?window.defaultStatus:0;},E=function(){var T=f.referrer.match(/^http[s]?\:\/\/([^\/\:]+)(\:\d{1,5})?[\/]?.*$/);if(T){return T[1];}else{return"";}}(),H=function(){var Y=f.location.hostname;if(W(Y)){return Y;}var U=Y.split("."),T=U.length,V=0,X="";if(T<=2){return Y;}while(++V!=T){X+="."+U[V];}return X;function W(Z){return Z.match(/^([1-9]|[1-9]\d|1\d{2}|2[0-1]\d|22[0-3])(\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])){3}$/);}}(),N=function(){for(var U=0;U<K.pg_ads.length;U++){var V=K.pg_ads[U],T=a;switch(V.display_status){case 5:K.addEvent(V.ads_elem,"click",T);break;case 1:case 2:case 3:K.addEvent(V.ads_elem,"click",T).addEvent(V.ads_elem,"focus",T).addEvent(V.ads_elem,"mouseover",T).addEvent(V.ads_elem,"mouseout",T);break;}}},G=null;K.extend(I).incre().set_cookies().doc_ready(function(){K.logger.send(K.grab_ads().get_url("06"));});window.pubsage=K;}function I(){this.doc_ready_funcs=[];this.reg_hh=function(T){this.doc_ready_funcs.push(T);};this.incre=function(){this.cur_slot_idx++;this.slots.push({siteId:pubsage_site_id,slotname:pubsage_slot,token:pubsage_tk});var U=z("script"),T=this;u(U[U.length-1],function(X){var W=X.getAttribute&&X.getAttribute("name"),Y={};if(W){var V=W.match(/^pubsage_([\w\W]+)$/);if(V&&V[1]){X.setAttribute("idx",T.cur_slot_idx);return true;}}return false;});return this;};this.doc_ready=s;this.bind=e;this.addEvent=B;this.registerAll=function(){if(!_doc_is_ready){return setTimeout(arguments.callee,1);}N();};this.grab_ads=function(){this.pg_ads=S();return this;};this.get_url=function(X,W,U){switch(X){case"06":case"05":case"01":var V=R(X)+K.slots[K.cur_slot_idx].siteId+"/"+p(this.pg_ads)+"-"+this.rnd()+".gif?dom="+H+"&slt="+this.slots[0].slotname+("&fla="+this.flash.major+"."+this.flash.minor+"."+this.flash.revision)+"&ref="+f.referrer;break;case"02":var T=parseInt(u(U,function(Z){var Y=Z.getAttribute&&Z.getAttribute("name");if(/^pubsage_[\w\W]+$/.test(Y)){return Z.getAttribute("idx")+"";}return false;}));V=R("02")+ +K.slots[T].siteId+"/"+this.slots[T].token+"-"+U.slot_id+"-"+n(W)+"-"+this.rnd()+".gif?ext="+O();break;}return V;};this.cookies=new function(){var T=this;this.get=function(ab){var aa=f.cookie;if(aa==""){return null;}var V=aa.split(/;\s*/);var U=null,Y=[];for(var X=0;X<V.length;X++){var Z,W=V[X];if(typeof ab=="string"){U=W.substring(0,ab.length+1)==(ab+"=");if(U){U=W;break;}}}return U;};this.getVal=function(V){var U;return(U=T.get(V))?decodeURIComponent(U.substring(U.indexOf("=")+1)):null;};this.write=function(Y,U,W){var V=Y+"="+encodeURIComponent(U);if(W){for(var X in W){(/^maxage$/i).exec(X)&&(V+="; max-age="+(W[X]));(/^expires$/i).exec(X)&&(V+="; expires="+W[X].toGMTString());(/^path$/i).exec(X)&&(V+="; path="+W[X]);(/^domain$/i).exec(X)&&(V+="; domain="+W[X]);}}f.cookie=V;};this.remove=function(X,V){var U=name+"=";U+="; max-age=0";if(prop){for(var W in V){(/^path$/i).exec(W)&&(U+="; path="+V[W]);(/^domain$/i).exec(W)&&(U+="; domain="+V[W]);}}f.cookie=U;};this.enabled=function(){if(navigator.cookieEnabled!=undefined){return navigator.cookieEnabled?1:0;}f.cookie="testcookie=test; max-age=10000";var U=f.cookie;if(U.indexOf("testcookie=test")==-1){return 0;}else{f.cookie="testcookie=test; max-age=0";return 1;}}();};this.flash=new function(){var T=this;T.installed=false;T.raw="";T.major=-1;T.minor=-1;T.revision=-1;T.revisionStr="";var U=function(){var Y=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(ah){return W(ah);}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(aj){var ah="6,0,21";try{aj.AllowScriptAccess="always";ah=W(aj);}catch(ai){}return ah;}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(ah){return W(ah);}}];var V=function(ah){var aj=-1;try{aj=new ActiveXObject(ah);}catch(ai){aj={activeXError:true};}return aj;};var W=function(aj){var ah=-1;try{ah=aj.GetVariable("$version");}catch(ai){}return ah;};var ag=function(ak){var ai=ak.split(/ +/);var aj=ai[2].split(/\./);var ah=ai[3];return{raw:ak,major:parseInt(aj[0],10),minor:parseInt(aj[1],10),revisionStr:ah,revision:X(ah)};};var X=function(ah){return parseInt(ah.replace(/[a-zA-Z]/g,""),10)||T.revision;};var ac=function(ai){var ah=ai.split(",");return{raw:ai,major:parseInt(ah[0].split(" ")[1],10),minor:parseInt(ah[1],10),revision:parseInt(ah[2],10),revisionStr:ah[2]};};if(navigator.plugins&&navigator.plugins.length>0){var af="application/x-shockwave-flash";var ae=navigator.mimeTypes;if(ae&&ae[af]&&ae[af].enabledPlugin&&ae[af].enabledPlugin.description){var ad=ae[af].enabledPlugin.description;var Z=ag(ad);T.raw=Z.raw;T.major=Z.major;T.minor=Z.minor;T.revisionStr=Z.revisionStr;T.revision=Z.revision;T.installed=true;}}else{if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var ad=-1;for(var ab=0;ab<Y.length&&ad==-1;ab++){var aa=V(Y[ab].name);if(!aa.activeXError){T.installed=true;ad=Y[ab].version(aa);if(ad!=-1){var Z=ac(ad);T.raw=Z.raw;T.major=Z.major;T.minor=Z.minor;T.revision=Z.revision;T.revisionStr=Z.revisionStr;}}}}}}();};this.in_frame=(window.parent==window?0:1);this.format_ext_time=function(T){var U=T.getUTCFullYear()+V(T.getUTCMonth()+1)+V(T.getUTCDate())+V(T.getUTCHours())+V(T.getUTCMinutes())+V(T.getUTCSeconds())+(String(T.getUTCMilliseconds()).length==2?"0"+T.getUTCMilliseconds():T.getUTCMilliseconds());return U;function V(X){var W=String(X);W.length==1?W="0"+W:void 0;return W;}};this.set_cookies=function(){this.set_session_coo().set_user_coo();return this;};this.set_session_coo=function(){var W,V=new Date(),U=new Date();U.setTime(V.getTime()+1200000);var T=this.cookies.getVal("_pub_sid");T?W=T:W=V.getTime()+"-"+E;this.cookies.write("_pub_sid",W,{maxage:1200,path:"/",domain:H,expires:U});_pub_session_id=W;return this;};this.set_user_coo=function(){var W=this.cookies.getVal("_pub_isn");if(W){var V=new Date().getTime();parseInt(V)-parseInt(W)>=86400000?_is_new_user=0:_is_new_user=1;}else{var U=new Date(),T=new Date();U.setTime(U.getTime()+315360000000);this.cookies.write("_pub_isn",T.getTime(),{maxage:315360000,path:"/",domain:H,expires:U});_is_new_user=1;}return this;};this.logger=new function(){var T=this;this.buffer=[];this.send=function(U){var V=f.createElement("script");V.type="type/javascript";z("head")[0].appendChild(V);this.buffer.push(V);V.src=U;};setInterval(function(){if(T.buffer.length>10){var U=T.buffer.splice(0,T.buffer.length-1);for(var V=0;V<U.length;V++){z("head")[0].removeChild(U[V]);}}},120000);};}})(window.pubsage);
